<div class="container">
  <div class="row no-gutters">
    <div class="col-12 col-lg-6 mb-lg-4 mt-4">
      <div id="search-bar" style="background-image: url(<%= asset_path "undraw.svg" %>);background-repeat: no-repeat;
  background-size: 1100px;">
        <h2>Search <i class="fas fa-search" style="font-size: 0.7em;"></i></h2>
        <form>
          <div class="form-row">
            <div class="col-12 my-2">
              <!-- <input type="text" class="form-control-sm w-100 small-radius" placeholder="Location"> -->
              <%= form_tag rooms_path, method: :get do %>
              <%= text_field_tag :location, params[:location], class: "form-control-sm w-100 small-radius", placeholder: "Location of guest" %>
            </div>
            <div class="col-6 my-2">
              <!-- <input type="integer" class="form-control-sm w-100 small-radius" placeholder="Distance"> -->
              <%= text_field_tag :radius, params[:radius], class: "form-control-sm w-100 small-radius", placeholder: "Distance guest can travel" %>
            </div>
            <div class="col-6 my-2">
              <input type="date" class="form-control-sm w-100 small-radius" placeholder="Dates required" id='ollie-date-picker' name='range_dates'>
            </div>
            <div class="col-4 my-2">
              <input type="integer" class="form-control-sm w-100 small-radius" placeholder="Number of adults" name="adults">
            </div>
            <div class="col-4 my-2">
              <input type="integer" class="form-control-sm w-100 small-radius" placeholder="Number of children" name="children">
            </div>
            <div class="col-4 my-2">
              <input type="integer" class="form-control-sm w-100 small-radius" placeholder="Number of infants" name="infants">
            </div>
            <div class="col-12 mt-2">
              <%= submit_tag "Search", class: "mx-0 nav-link btn btn-secondary" %>
              <!-- <button type="submit" class="mx-0 nav-link btn btn-secondary">Submit</button> -->
            </div>
            <% end %>
          </div>
        </form>
      </div>
    </div>

    <%#= f.input :start_date, as: :string, class: 'form-control datepicker', input_html: {type: :date, value: Time.now.strftime("%Y-%m-%d") } %>
<!--     <div class="col-12 col-lg-3">
      <form action="/rooms" method="GET">
        <input type="hidden" name="location" value="<%= params[:location] %>">
        <input type="hidden" name="radius" value="<%= params[:radius] %>">
        <div class="col-12 mb-3 px-0">
          <label for="Beds">Change number of beds:</label>
          <input type="integer" name="beds">
        </div>
        <div class="col-12 mb-3 px-0">
          <label for="Minimum stay">Change minimum stay:</label>
          <input type="integer" name="minimum_stay">
        </div>
        <div class="col-12 mb-4 px-0">
          <label for="Distance">Change distance:</label>
          <input type="integer" name="radius" value="<%= params[:radius] %>">
        </div>
        <div class="col-12 px-0">
          <button type="submit" class="mb-4 mx-0 nav-link btn btn-secondary">Submit</button>
        </div>
      </form>
    </div> -->
    <div class="col-12 col-lg-6 mt-lg-4 mb-4">
      <div id="map" class="map-custom" style="width: 100%; height: 285px; marker-color: red" data-markers="<%= @markers.to_json %>" data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>
  <div class="row mb-4">
    <% @rooms.each do |room| %>
      <div class="col-12 col-sm-6 col-lg-4 col-xl-3 d-flex align-items-stretch">
        <div class="card mb-3 card-radius grow w-100" >
          <%= link_to room_path(room, adults: params[:adults], children: params[:children], infants: params[:infants], location: params[:location], range_dates: params[:range_dates]) do %>
            <%= cl_image_tag room.photo_url_or_default, alt: room.address, class: "card-img-top card-image-radius" %>
          <% end %>
          <div class="card-body">
            <%= link_to room_path(room, adults: params[:adults], children: params[:children], infants: params[:infants], location: params[:location], range_dates: params[:range_dates]), class: "card-title" do %>
              <h5><%#= room.beds %> <%#= room.beds == 1 ? 'Bed' : 'Beds' %> <!-- - --><%= room.address  %></h5>
            <% end %>
            <%# raise %>
            <i class="fas fa-bed mr-2 my-2 main-colour"><span class="card-detail-text">&nbsp <%= room.beds%> <%= room.beds == 1 ? 'bed' : 'beds' %> available</span></i>
            <i class="fas fa-map-marker-alt mr-2 my-2 main-colour"><span class="card-detail-text">&nbsp <%= room.distance_from(@search_location).round(2) %> miles away</span></i>
            <i class="fas fa-shower mr-2 my-2 main-colour"><span class="card-detail-text">&nbsp <%= room.facilities %> facilities</span></i>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<!-- Jquery JS-->
 <!-- <script src="assets/vendor/jquery/jquery.min.js"></script> -->
<!-- Vendor JS
<script src="assets/vendor/select2/select2.min.js"></script>
<script src="assets/vendor/datepicker/moment.min.js"></script>
<script src="assets/vendor/datepicker/daterangepicker.js"></script> -->

<!-- Main JS-->
<!-- <script src="js/global.js"></script> -->
